> 摘自W3School官方文档：<http://www.w3school.com.cn/xpath/index.asp>

# 有关数值的函数
<table><tbody><tr><td> <p>名称</p> </td><td> <p>说明</p> </td></tr><tr><td> <p>fn:number(arg)</p> </td><td> <p>返回参数的数值。参数可以是布尔值、字符串或节点集。</p> <p>例子：number('100')</p> <p>结果：100</p> </td></tr><tr><td> <p>fn:abs(num)</p> </td><td> <p>返回参数的绝对值。</p> <p>例子：abs(3.14)</p> <p>结果：3.14</p> <p>例子：abs(-3.14)</p> <p>结果：3.14</p> </td></tr><tr><td> <p>fn:ceiling(num)</p> </td><td> <p>返回大于 num 参数的最小整数。</p> <p>例子：ceiling(3.14)</p> <p>结果：4</p> </td></tr><tr><td> <p>fn:floor(num)</p> </td><td> <p>返回不大于 num 参数的最大整数。</p> <p>例子：floor(3.14)</p> <p>结果：3</p> </td></tr><tr><td> <p>fn:round(num)</p> </td><td> <p>把 num 参数舍入为最接近的整数。</p> <p>例子：round(3.14)</p> <p>结果：3</p> </td></tr><tr><td> <p>fn:round-half-to-even()</p> </td><td> <p>例子：round-half-to-even(0.5)</p> <p>结果：0</p> <p>例子：round-half-to-even(1.5)</p> <p>结果：2</p> <p>例子：round-half-to-even(2.5)</p> <p>结果：2</p> </td></tr></tbody></table>

# 有关字符串的函数

<table><tbody><tr><td> <p>名称</p> </td><td> <p>说明</p> </td></tr><tr><td> <p>fn:string(arg)</p> </td><td> <p>返回参数的字符串值。参数可以是数字、逻辑值或节点集。</p> <p>例子：string(314)</p> <p>结果："314"</p> </td></tr><tr><td> <p>fn:codepoints-to-string(int,int,...)</p> </td><td> <p>根据代码点序列返回字符串。</p> <p>例子：codepoints-to-string(84, 104, 233, 114, 232, 115, 101)</p> <p>结果：'Thérèse'</p> </td></tr><tr><td> <p>fn:string-to-codepoints(string)</p> </td><td> <p>根据字符串返回代码点序列。</p> <p>例子：string-to-codepoints("Thérèse")</p> <p>结果：84, 104, 233, 114, 232, 115, 101</p> </td></tr><tr><td> <p>fn:codepoint-equal(comp1,comp2)</p> </td><td> <p>根据 Unicode 代码点对照，如果 comp1 的值等于 comp2 的值，则返回 true。(http://www.w3.org/2005/02/xpath-functions/collation/codepoint)，否则返回 false。</p> </td></tr><tr><td> <p>fn:compare(comp1,comp2)</p> <p>fn:compare(comp1,comp2,collation)</p> </td><td> <p>如果 comp1 小于 comp2，则返回 -1。如果 comp1 等于 comp2，则返回 0。如果 comp1 大于 comp2，则返回 1。（根据所用的对照规则）。</p> <p>例子：compare('ghi', 'ghi')</p> <p>结果：0</p> </td></tr><tr><td> <p>fn:concat(string,string,...)</p> </td><td> <p>返回字符串的拼接。</p> <p>例子：concat('XPath ','is ','FUN!')</p> <p>结果：'XPath is FUN!'</p> </td></tr><tr><td> <p>fn:string-join((string,string,...),sep)</p> </td><td> <p>使用 sep 参数作为分隔符，来返回 string 参数拼接后的字符串。</p> <p>例子：string-join(('We', 'are', 'having', 'fun!'), ' ')</p> <p>结果：' We are having fun! '</p> <p>例子：string-join(('We', 'are', 'having', 'fun!'))</p> <p>结果：'Wearehavingfun!'</p> <p>例子：string-join((), 'sep')</p> <p>结果：''</p> </td></tr><tr><td> <p>fn:substring(string,start,len)</p> <p>fn:substring(string,start)</p> </td><td> <p>返回从 start 位置开始的指定长度的子字符串。第一个字符的下标是 1。如果省略 len 参数，则返回从位置 start 到字符串末尾的子字符串。</p> <p>例子：substring('Beatles',1,4)</p> <p>结果：'Beat'</p> <p>例子：substring('Beatles',2)</p> <p>结果：'eatles'</p> </td></tr><tr><td> <p>fn:string-length(string)</p> <p>fn:string-length()</p> </td><td> <p>返回指定字符串的长度。如果没有 string 参数，则返回当前节点的字符串值的长度。</p> <p>例子：string-length('Beatles')</p> <p>结果：7</p> </td></tr><tr><td> <p>fn:normalize-space(string)</p> <p>fn:normalize-space()</p> </td><td> <p>删除指定字符串的开头和结尾的空白，并把内部的所有空白序列替换为一个，然后返回结果。如果没有 string 参数，则处理当前节点。</p> <p>例子：normalize-space(' The&nbsp;&nbsp;&nbsp;XML ')</p> <p>结果：'The XML'</p> </td></tr><tr><td> <p>fn:normalize-unicode()</p> </td><td> <p>执行 Unicode 规格化。</p> </td></tr><tr><td> <p>fn:upper-case(string)</p> </td><td> <p>把 string 参数转换为大写。</p> <p>例子：upper-case('The XML')</p> <p>结果：'THE XML'</p> </td></tr><tr><td> <p>fn:lower-case(string)</p> </td><td> <p>把 string 参数转换为小写。</p> <p>例子：lower-case('The XML')</p> <p>结果：'the xml'</p> </td></tr><tr><td> <p>fn:translate(string1,string2,string3)</p> </td><td> <p>把 string1 中的 string2 替换为 string3。</p> <p>例子：translate('12:30','30','45')</p> <p>结果：'12:45'</p> <p>例子：translate('12:30','03','54')</p> <p>结果：'12:45'</p> <p>例子：translate('12:30','0123','abcd')</p> <p>结果：'bc:da'</p> </td></tr><tr><td> <p>fn:escape-uri(stringURI,esc-res)</p> </td><td> <p>例子：escape-uri("http://example.com/test#car", true())</p> <p>结果："http%3A%2F%2Fexample.com%2Ftest#car"</p> <p>例子：escape-uri("http://example.com/test#car", false())</p> <p>结果："http://example.com/test#car"</p> <p>例子：escape-uri ("http://example.com/~bébé", false())</p> <p>结果："http://example.com/~b%C3%A9b%C3%A9"</p> </td></tr><tr><td> <p>fn:contains(string1,string2)</p> </td><td> <p>如果 string1 包含 string2，则返回 true，否则返回 false。</p> <p>例子：contains('XML','XM')</p> <p>结果：true</p> </td></tr><tr><td> <p>fn:starts-with(string1,string2)</p> </td><td> <p>如果 string1 以 string2 开始，则返回 true，否则返回 false。</p> <p>例子：starts-with('XML','X')</p> <p>结果：true</p> </td></tr><tr><td> <p>fn:ends-with(string1,string2)</p> </td><td> <p>如果 string1 以 string2 结尾，则返回 true，否则返回 false。</p> <p>例子：ends-with('XML','X')</p> <p>结果：false</p> </td></tr><tr><td> <p>fn:substring-before(string1,string2)</p> </td><td> <p>返回 string2 在 string1 中出现之前的子字符串。</p> <p>例子：substring-before('12/10','/')</p> <p>结果：'12'</p> </td></tr><tr><td> <p>fn:substring-after(string1,string2)</p> </td><td> <p>返回 string2 在 string1 中出现之后的子字符串。</p> <p>例子：substring-after('12/10','/')</p> <p>结果：'10'</p> </td></tr><tr><td> <p>fn:matches(string,pattern)</p> </td><td> <p>如果 string 参数匹配指定的模式，则返回 true，否则返回 false。</p> <p>例子：matches("Merano", "ran")</p> <p>结果：true</p> </td></tr><tr><td> <p>fn:replace(string,pattern,replace)</p> </td><td> <p>把指定的模式替换为 replace 参数，并返回结果。</p> <p>例子：replace("Bella Italia", "l", "*")</p> <p>结果：'Be**a Ita*ia'</p> <p>例子：replace("Bella Italia", "l", "")</p> <p>结果：'Bea Itaia'</p> </td></tr><tr><td> <p>fn:tokenize(string,pattern)</p> </td><td> <p>例子：tokenize("XPath is fun", "\s+")</p> <p>结果：("XPath", "is", "fun")</p> </td></tr></tbody></table>

# 关于布尔值的函数

<table><tbody><tr><td> <p>名称</p> </td><td> <p>说明</p> </td></tr><tr><td> <p>fn:boolean(arg)</p> </td><td> <p>返回数字、字符串或节点集的布尔值。</p> </td></tr><tr><td> <p>fn:not(arg)</p> </td><td> <p>首先通过 boolean() 函数把参数还原为一个布尔值。如果该布尔值为 false，则返回 true，否则返回 true。</p> <p>例子：not(true())</p> <p>结果：false</p> </td></tr><tr><td> <p>fn:true()</p> </td><td> <p>返回布尔值 true。</p> <p>例子：true()</p> <p>结果：true</p> </td></tr><tr><td> <p>fn:false()</p> </td><td> <p>返回布尔值 false。</p> <p>例子：false()</p> <p>结果：false</p> </td></tr></tbody></table>

# 有关序列的函数
## 一般性的函数
<table><tbody><tr><td> <p>名称</p> </td><td> <p>说明</p> </td></tr><tr><td> <p>fn:index-of((item,item,...),searchitem)</p> </td><td> <p>返回在项目序列中等于 searchitem 参数的位置。</p> <p>例子：index-of ((15, 40, 25, 40, 10), 40)</p> <p>结果：(2, 4)</p> <p>例子：index-of (("a", "dog", "and", "a", "duck"), "a")</p> <p>Result (1, 4)</p> <p>例子：index-of ((15, 40, 25, 40, 10), 18)</p> <p>结果：()</p> </td></tr><tr><td> <p>fn:remove((item,item,...),position)</p> </td><td> <p>返回由 item 参数构造的新序列 - 同时删除 position 参数指定的项目。</p> <p>例子：remove(("ab", "cd", "ef"), 0)</p> <p>结果：("ab", "cd", "ef")</p> <p>例子：remove(("ab", "cd", "ef"), 1)</p> <p>结果：("cd", "ef")</p> <p>例子：remove(("ab", "cd", "ef"), 4)</p> <p>结果：("ab", "cd", "ef")</p> </td></tr><tr><td> <p>fn:empty(item,item,...)</p> </td><td> <p>如果参数值是空序列，则返回 true，否则返回 false。</p> <p>例子：empty(remove(("ab", "cd"), 1))</p> <p>结果：false</p> </td></tr><tr><td> <p>fn:exists(item,item,...)</p> </td><td> <p>如果参数值不是空序列，则返回 true，否则返回 false。</p> <p>例子：exists(remove(("ab"), 1))</p> <p>结果：false</p> </td></tr><tr><td> <p>fn:distinct-values((item,item,...),collation)</p> </td><td> <p>返回唯一不同的值。</p> <p>例子：distinct-values((1, 2, 3, 1, 2))</p> <p>结果：(1, 2, 3)</p> </td></tr><tr><td> <p>fn:insert-before((item,item,...),pos,inserts)</p> </td><td> <p>返回由 item 参数构造的新序列 - 同时在 pos 参数指定位置插入 inserts 参数的值。</p> <p>例子：insert-before(("ab", "cd"), 0, "gh")</p> <p>结果：("gh", "ab", "cd")</p> <p>例子：insert-before(("ab", "cd"), 1, "gh")</p> <p>结果：("gh", "ab", "cd")</p> <p>例子：insert-before(("ab", "cd"), 2, "gh")</p> <p>结果：("ab", "gh", "cd")</p> <p>例子：insert-before(("ab", "cd"), 5, "gh")</p> <p>结果：("ab", "cd", "gh")</p> </td></tr><tr><td> <p>fn:reverse((item,item,...))</p> </td><td> <p>返回指定的项目的颠倒顺序。</p> <p>例子：reverse(("ab", "cd", "ef"))</p> <p>结果：("ef", "cd", "ab")</p> <p>例子：reverse(("ab"))</p> <p>结果：("ab")</p> </td></tr><tr><td> <p>fn:subsequence((item,item,...),start,len)</p> </td><td> <p>返回 start 参数指定的位置返回项目序列，序列的长度由 len 参数指定。第一个项目的位置是 1。</p> <p>例子：subsequence(($item1, $item2, $item3,...), 3)</p> <p>结果：($item3, ...)</p> <p>例子：subsequence(($item1, $item2, $item3, ...), 2, 2)</p> <p>结果：($item2, $item3)</p> </td></tr><tr><td> <p>fn:unordered((item,item,...))</p> </td><td> <p>依据实现决定的顺序来返回项目。</p> </td></tr></tbody></table>

## 测试序列容量的函数

<table><tbody><tr><td> <p>名称</p> </td><td> <p>说明</p> </td></tr><tr><td> <p>fn:zero-or-one(item,item,...)</p> </td><td> <p>如果参数包含零个或一个项目，则返回参数，否则生成错误。</p> </td></tr><tr><td> <p>fn:one-or-more(item,item,...)</p> </td><td> <p>如果参数包含一个或多个项目，则返回参数，否则生成错误。</p> </td></tr><tr><td> <p>fn:exactly-one(item,item,...)</p> </td><td> <p>如果参数包含一个项目，则返回参数，否则生成错误。</p> </td></tr></tbody></table>

## Equals, Union, Intersection and Except

<table><tbody><tr><td> <p>名称</p> </td><td> <p>说明</p> </td></tr><tr><td> <p>fn:deep-equal(param1,param2,collation)</p> </td><td> <p>如果 param1 和 param2 与彼此相等（deep-equal），则返回 true，否则返回 false。</p> </td></tr></tbody></table>

## 合计函数

<table><tbody><tr><td> <p>名称</p> </td><td> <p>说明</p> </td></tr><tr><td> <p>fn:count((item,item,...))</p> </td><td> <p>返回节点的数量。</p> </td></tr><tr><td> <p>fn:avg((arg,arg,...))</p> </td><td> <p>返回参数值的平均数。 例子：avg((1,2,3)) 结果：2</p> </td></tr><tr><td> <p>fn:max((arg,arg,...))</p> </td><td> <p>返回大于其它参数的参数。 例子：max((1,2,3)) 结果：3 例子：max(('a', 'k')) 结果：'k'</p> </td></tr><tr><td> <p>fn:min((arg,arg,...))</p> </td><td> <p>返回小于其它参数的参数。 例子：min((1,2,3)) 结果：1 例子：min(('a', 'k')) 结果：'a'</p> </td></tr><tr><td> <p>fn:sum(arg,arg,...)</p> </td><td> <p>返回指定节点集中每个节点的数值的总和。</p> </td></tr></tbody></table>

## 生成序列的函数

<table><tbody><tr><td> <p>名称</p> </td><td> <p>说明</p> </td></tr><tr><td> <p>fn:id((string,string,...),node)</p> </td><td> <p>Returns a sequence of element nodes that have an ID value equal to the value of one or more of the values specified in the string argument</p> </td></tr><tr><td> <p>fn:idref((string,string,...),node)</p> </td><td> <p>Returns a sequence of element or attribute nodes that have an IDREF value equal to the value of one or more of the values specified in the string argument</p> </td></tr><tr><td> <p>fn:doc(URI)</p> </td><td> <p>&nbsp;</p> </td></tr><tr><td> <p>fn:doc-available(URI)</p> </td><td> <p>如果 doc() 函数返回文档节点，则返回 true，否则返回 false。</p> </td></tr><tr><td> <p>fn:collection()</p> <p>fn:collection(string)</p> </td><td> <p>&nbsp;</p> </td></tr></tbody></table>

# 上下文函数

<table><tbody><tr><td> <p>名称</p> </td><td> <p>说明</p> </td></tr><tr><td> <p>fn:position()</p> </td><td> <p>返回当前正在被处理的节点的 index 位置。</p> <p>例子：//book[position()&lt;=3]</p> <p>结果：选择前三个 book 元素</p> </td></tr><tr><td> <p>fn:last()</p> </td><td> <p>返回在被处理的节点列表中的项目数目。</p> <p>例子：//book[last()]</p> <p>结果：选择最后一个 book 元素</p> </td></tr><tr><td> <p>fn:current-dateTime()</p> </td><td> <p>返回当前的 dateTime（带有时区）。</p> </td></tr><tr><td> <p>fn:current-date()</p> </td><td> <p>返回当前的日期（带有时区）。</p> </td></tr><tr><td> <p>fn:current-time()</p> </td><td> <p>返回当前的时间（带有时区）。</p> </td></tr><tr><td> <p>fn:implicit-timezone()</p> </td><td> <p>返回隐式时区的值。</p> </td></tr><tr><td> <p>fn:default-collation()</p> </td><td> <p>返回默认对照的值。</p> </td></tr><tr><td> <p>fn:static-base-uri()</p> </td><td> <p>返回 base-uri 的值。</p> </td></tr></tbody></table>

# 函数示例
<table><tbody><tr><td> <p>名称</p> </td><td> <p>说明</p> </td></tr><tr><td> <p>//a[not(contains(@href,'detail'))]</p> </td><td> <p>返回所有 “href” 属性值不包含 “detail” 的 a 节点</p> </td></tr><tr><td> <p>//a[starts-with(@href,'//detail.tmall.com')]</p> </td><td> <p>返回所有 “href” 属性值以 “//detail.tmall.com” 开始的 a 节点</p> </td></tr><tr><td> <p>//a[contains(@href,'//store.taobao.com')]</p> </td><td> <p>返回所有 “href” 属性值包含 “//store.taobao.com” 的 a 节点</p> </td></tr><tr><td> <p>//*[contains(@class,'filter') and contains(@class,'clearfix')]/a/text()</p> </td><td> <p>获取 “class” 属性值包含 “filter” 并且包含 “clearfix” 的任意元素下的 a 子节点中的文本</p> </td></tr><tr><td> <p>//b[@class='ui-page-cur']/following-sibling::a[position()=1]</p> </td><td> <p>获取 “class” 属性值为 “ui-page-cur” 的 b 节点之后的第一个同胞 a 标签</p> </td></tr></tbody></table>
 